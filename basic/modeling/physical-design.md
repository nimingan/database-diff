# 物理设计
* 根据所使用的数据库特点进行表结构设计

## 定义数据库、表及字段的命名规范
* 可读性原则
* 表意性原则
* 长名原则

## 字段命名

- 所有数据库对象名称必须使用小写字母可选用下划线分割
	- linux大小写敏感
- 所有数据库对象名称定义禁止使用MySQL保留关键字
- 数据库对象的命名要能做到见名识义，并且最好不要超过32个字
- 临时库表必须以tmp为前缀并以日期为后缀
- 用于备份的库、表必须以bak为前缀并以日期为后缀
- 所有存储相同数据的列名和列类型必须一致

## 选择合适的存储引擎
- [MySQL : 存储引擎](../database/mysql-engine.md)

## 数据类型选择
- 当一个列可以选择多种数据类型时，应该优先考虑数字类型，其次是日期或二进制类型，最后是字符类型。对于相同级别的数据类型，应该优先选择占用空间小的数据类型。
	- 关于ip的小hack，使用mysql内置函数转换：INET_ATON(’255.255.255.255‘)
- 谨慎使用ENUM，TEXT字符串类型
- 同财务相关的数值型数据，必须使用decimal类型
- 如何选择`varchar`和`char`类型？
	* `varchar`长度的选择问题
		* 使用最小的符合需求的长度
		* `varchar(5)`和`varchar(200)`存储‘mysql’字符串性能不同
	* `varchar`的使用场景
		* 字符串列的最大长度比平均长度大很多
		* 字符串列很少被更新
		* 使用了多字节字符集存储字符串
	* `char`类型的存储特点
		* `char`类型是定长的
		* 字符串存储在`char`类型的列中会删除末尾的空格
		* `char`类型的最大宽度为255
	* `char的`使用场景
		* 存储所长度近似的值
		* 适合存储短字符串
		* 存储经常更新的字符串列
* 如何存储日期数据?
	* `datetime` : 与时区无关，占用8个字节的存储空间
	* `timestamp`
		* 存储了由格林尼治时间1970年1月1日到当前时间的描述，占用4个字节
		* 依赖于所指定的时区
		* 在行的数据修改时可以自动修改timestamp列的值
	* date类型
	* time类型
	* 注意事项
		* 不要使用字符串类型来存储日期时间数据
		* 使用`int`存储日期时间不如使用`timestamp`类型
	* 好处
		* 日期时间类型通常比字符串占用的存储空间小
		* 日期时间类型在进行查找过滤时可以利用日期来进行对比
		* 日期时间类型有丰富的处理函数，可以方便的对比日期类型进行日期计算

## 如何为Innodb选择主键
* 主键应该尽可能的小
* 主键应该是顺序增长的
	* 增加数据的插入效率
* Innodb的主键和业务主键可以不同